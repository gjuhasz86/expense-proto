<div>
    <transaction-relay #relay
                       (transactions)="transactions=$event"
                       [filter]="filter"></transaction-relay>
    <action-relay #mainAction></action-relay>

    <label>Page</label>
    <input type="text" [(ngModel)]="filter.page"/>
    <label>Limit</label>
    <input type="text" [(ngModel)]="filter.limit"/>
    <button type="button" (click)="relay.sendFilter()">Set</button>

    <transaction-filter
            [(account)]="filter.account"
            [(description)]="filter.description"
            [(category)]="filter.category"
            (filtered)="relay.sendFilter()"></transaction-filter>
    <div>
        <input #mainCb type="checkbox"
               (click)="mainAction.relay.setAllSelection(mainCb.checked)">
        <button type="button"
                (click)="mainAction.relay.deleteSelected()">Delete
        </button>
        <button type="button" (click)="relay.refresh()">Refresh</button>
    </div>
    <div>
        selected:{{selSvc.selected | async | json}}
        <div *ngFor="let t of transactions; trackBy: trackById">
            <action-relay #action (deleteSelected)="remove(t.id(),cb.checked)"></action-relay>
            <input #cb type="checkbox" [ngModel]="selSvc.isSelected(t.id())"
                   (ngModelChange)="selSvc.toggle(t.id())">
            <button type="button" (click)="remove(t.id(),true)">x</button>
            <button type="button" (click)="action.relay.transaction.edit(t)">edit</button>
            <span>{{t.id()}} - {{t.description}} - {{t.amount}} - {{t.date}}</span>
        </div>
    </div>
</div>